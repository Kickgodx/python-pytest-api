{"uid":"e2d4396fd87a159","name":"Создание и обновление информации о питомце","fullName":"tests.pet.test_pet.TestPet#test_update_pet","historyId":"31ce1652e3701bf925701e382b36b740","time":{"start":1744327868862,"stop":1744327888911,"duration":20049},"status":"failed","statusMessage":"AssertionError: Статус код 404 не равен ожидаемому 200","statusTrace":"self = <test_pet.TestPet object at 0x7f48be3f6db0>\nclient = <src.models.client.Client object at 0x7f48be04b1a0>\npet_helper = <src.func.pet.helpers.PetHelper object at 0x7f48be04b290>\npet_data = Pet(id=530, category=Category(id=577, name='Jared Brooks'), name='Bobby Jr.', photo_urls=['https://dummyimage.com/247x507'], tags=[Tag(id=29, name='DarkOrchid')], status='sold')\n\n    @allure.story(\"Обновление информации о питомцах\")\n    @allure.title(\"Создание и обновление информации о питомце\")\n    def test_update_pet(self, client, pet_helper, pet_data):\n    \twith allure.step(\"Создание питомца\"):\n    \t\tresponse = pet_helper.create_pet(client, pet_data)\n    \t\tCustomAsserts.assert_equal(response.name, pet_data.name)\n    \n    \ttime.sleep(10)\n    \n    \twith allure.step(\"Обновление информации о питомце\"):\n    \t\tnew_name = \"Bobby Jr.\"\n    \t\tpet_data.name = new_name\n    \t\tresponse = pet_helper.update_pet(client, pet_data)\n    \t\tCustomAsserts.assert_equal(response.name, new_name)\n    \n    \ttime.sleep(10)\n    \n    \twith allure.step(\"Проверка обновления информации о питомце\"):\n>   \t\tresponse = pet_helper.get_pet(client, pet_data.id)\n\ntests/pet/test_pet.py:61: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsrc/func/pet/helpers.py:25: in get_pet\n    CustomAsserts.check_status_code(response, expected_status_code)\nsrc/tech/custom_asserts.py:53: in check_status_code\n    _check_status_code(response, expected_status_code)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresp = <Response [404]>, expected_code = 200\n\n    @step(f\"Статус код = {expected_status_code}\")\n    def _check_status_code(resp, expected_code):\n>   \tassert resp.status_code == expected_code, f\"Статус код {resp.status_code} не равен ожидаемому {expected_code}\"\nE    AssertionError: Статус код 404 не равен ожидаемому 200\n\nsrc/tech/custom_asserts.py:51: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1744327868637,"stop":1744327868639,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pet_helper","time":{"start":1744327868639,"stop":1744327868639,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"client","time":{"start":1744327868639,"stop":1744327868639,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pet_data","time":{"start":1744327868859,"stop":1744327868862,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Статус код 404 не равен ожидаемому 200","statusTrace":"self = <test_pet.TestPet object at 0x7f48be3f6db0>\nclient = <src.models.client.Client object at 0x7f48be04b1a0>\npet_helper = <src.func.pet.helpers.PetHelper object at 0x7f48be04b290>\npet_data = Pet(id=530, category=Category(id=577, name='Jared Brooks'), name='Bobby Jr.', photo_urls=['https://dummyimage.com/247x507'], tags=[Tag(id=29, name='DarkOrchid')], status='sold')\n\n    @allure.story(\"Обновление информации о питомцах\")\n    @allure.title(\"Создание и обновление информации о питомце\")\n    def test_update_pet(self, client, pet_helper, pet_data):\n    \twith allure.step(\"Создание питомца\"):\n    \t\tresponse = pet_helper.create_pet(client, pet_data)\n    \t\tCustomAsserts.assert_equal(response.name, pet_data.name)\n    \n    \ttime.sleep(10)\n    \n    \twith allure.step(\"Обновление информации о питомце\"):\n    \t\tnew_name = \"Bobby Jr.\"\n    \t\tpet_data.name = new_name\n    \t\tresponse = pet_helper.update_pet(client, pet_data)\n    \t\tCustomAsserts.assert_equal(response.name, new_name)\n    \n    \ttime.sleep(10)\n    \n    \twith allure.step(\"Проверка обновления информации о питомце\"):\n>   \t\tresponse = pet_helper.get_pet(client, pet_data.id)\n\ntests/pet/test_pet.py:61: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsrc/func/pet/helpers.py:25: in get_pet\n    CustomAsserts.check_status_code(response, expected_status_code)\nsrc/tech/custom_asserts.py:53: in check_status_code\n    _check_status_code(response, expected_status_code)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresp = <Response [404]>, expected_code = 200\n\n    @step(f\"Статус код = {expected_status_code}\")\n    def _check_status_code(resp, expected_code):\n>   \tassert resp.status_code == expected_code, f\"Статус код {resp.status_code} не равен ожидаемому {expected_code}\"\nE    AssertionError: Статус код 404 не равен ожидаемому 200\n\nsrc/tech/custom_asserts.py:51: AssertionError","steps":[{"name":"Создание питомца","time":{"start":1744327868862,"stop":1744327868880,"duration":18},"status":"passed","steps":[{"name":"Создание питомца","time":{"start":1744327868862,"stop":1744327868880,"duration":18},"status":"passed","steps":[{"name":"Статус код = 200","time":{"start":1744327868880,"stop":1744327868880,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"resp","value":"<Response [200]>"},{"name":"expected_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"555dabfe670d1bff","name":"Request","source":"555dabfe670d1bff.txt","type":"text/plain","size":39},{"uid":"f5e4439ea91ea2ea","name":"Request headers","source":"f5e4439ea91ea2ea.json","type":"application/json","size":196},{"uid":"eb8a5a4af94e59bb","name":"Request body","source":"eb8a5a4af94e59bb.json","type":"application/json","size":256},{"uid":"6e2987e4bd8c7361","name":"Response status code","source":"6e2987e4bd8c7361.txt","type":"text/plain","size":3},{"uid":"5c6a035c759d2f04","name":"Response Headers","source":"5c6a035c759d2f04.json","type":"application/json","size":357},{"uid":"51f35d19c22494ae","name":"Response body","source":"51f35d19c22494ae.json","type":"application/json","size":256}],"parameters":[{"name":"client","value":"<src.models.client.Client object at 0x7f48be04b1a0>"},{"name":"data","value":"Pet(id=530, category=Category(id=577, name='Jared Brooks'), name='Jessica Jones', photo_urls=['https://dummyimage.com/247x507'], tags=[Tag(id=29, name='DarkOrchid')], status='sold')"},{"name":"expected_status_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Проверка, что 'Jessica Jones' равно 'Jessica Jones'","time":{"start":1744327868880,"stop":1744327868880,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"val","value":"'Jessica Jones'"},{"name":"expected_val","value":"'Jessica Jones'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Обновление информации о питомце","time":{"start":1744327878880,"stop":1744327878894,"duration":14},"status":"passed","steps":[{"name":"Обновление информации о питомце","time":{"start":1744327878881,"stop":1744327878894,"duration":13},"status":"passed","steps":[{"name":"Статус код = 200","time":{"start":1744327878894,"stop":1744327878894,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"resp","value":"<Response [200]>"},{"name":"expected_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"e307798563a9d839","name":"Request","source":"e307798563a9d839.txt","type":"text/plain","size":38},{"uid":"3a38cc7041eea9bf","name":"Request headers","source":"3a38cc7041eea9bf.json","type":"application/json","size":196},{"uid":"877f8ff9280f80ad","name":"Request body","source":"877f8ff9280f80ad.json","type":"application/json","size":252},{"uid":"d44e4049f48500e0","name":"Response status code","source":"d44e4049f48500e0.txt","type":"text/plain","size":3},{"uid":"5685b08a22f4945b","name":"Response Headers","source":"5685b08a22f4945b.json","type":"application/json","size":357},{"uid":"cc8c84f1ff568611","name":"Response body","source":"cc8c84f1ff568611.json","type":"application/json","size":252}],"parameters":[{"name":"client","value":"<src.models.client.Client object at 0x7f48be04b1a0>"},{"name":"data","value":"Pet(id=530, category=Category(id=577, name='Jared Brooks'), name='Bobby Jr.', photo_urls=['https://dummyimage.com/247x507'], tags=[Tag(id=29, name='DarkOrchid')], status='sold')"},{"name":"expected_status_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Проверка, что 'Bobby Jr.' равно 'Bobby Jr.'","time":{"start":1744327878894,"stop":1744327878894,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"val","value":"'Bobby Jr.'"},{"name":"expected_val","value":"'Bobby Jr.'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Проверка обновления информации о питомце","time":{"start":1744327888894,"stop":1744327888911,"duration":17},"status":"failed","statusMessage":"AssertionError: Статус код 404 не равен ожидаемому 200\n","statusTrace":"  File \"/home/runner/work/python-pytest-api/python-pytest-api/tests/pet/test_pet.py\", line 61, in test_update_pet\n    response = pet_helper.get_pet(client, pet_data.id)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/python-pytest-api/python-pytest-api/src/func/pet/helpers.py\", line 25, in get_pet\n    CustomAsserts.check_status_code(response, expected_status_code)\n  File \"/home/runner/work/python-pytest-api/python-pytest-api/src/tech/custom_asserts.py\", line 53, in check_status_code\n    _check_status_code(response, expected_status_code)\n  File \"/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/python-pytest-api/python-pytest-api/src/tech/custom_asserts.py\", line 51, in _check_status_code\n    assert resp.status_code == expected_code, f\"Статус код {resp.status_code} не равен ожидаемому {expected_code}\"\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Получение информации о питомце по ID","time":{"start":1744327888894,"stop":1744327888910,"duration":16},"status":"failed","statusMessage":"AssertionError: Статус код 404 не равен ожидаемому 200\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/python-pytest-api/python-pytest-api/src/func/pet/helpers.py\", line 25, in get_pet\n    CustomAsserts.check_status_code(response, expected_status_code)\n  File \"/home/runner/work/python-pytest-api/python-pytest-api/src/tech/custom_asserts.py\", line 53, in check_status_code\n    _check_status_code(response, expected_status_code)\n  File \"/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/python-pytest-api/python-pytest-api/src/tech/custom_asserts.py\", line 51, in _check_status_code\n    assert resp.status_code == expected_code, f\"Статус код {resp.status_code} не равен ожидаемому {expected_code}\"\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Статус код = 200","time":{"start":1744327888910,"stop":1744327888910,"duration":0},"status":"failed","statusMessage":"AssertionError: Статус код 404 не равен ожидаемому 200\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/python-pytest-api/python-pytest-api/src/tech/custom_asserts.py\", line 51, in _check_status_code\n    assert resp.status_code == expected_code, f\"Статус код {resp.status_code} не равен ожидаемому {expected_code}\"\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[{"name":"resp","value":"<Response [404]>"},{"name":"expected_code","value":"200"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"5234fe1be3b7a54b","name":"Request","source":"5234fe1be3b7a54b.txt","type":"text/plain","size":42},{"uid":"94213e5fec13e9d4","name":"Request headers","source":"94213e5fec13e9d4.json","type":"application/json","size":169},{"uid":"66005cb713f38f2f","name":"Response status code","source":"66005cb713f38f2f.txt","type":"text/plain","size":3},{"uid":"3beb7e68399b401","name":"Response Headers","source":"3beb7e68399b401.json","type":"application/json","size":357},{"uid":"23a7a02af6119cc2","name":"Response body","source":"23a7a02af6119cc2.json","type":"application/json","size":64}],"parameters":[{"name":"client","value":"<src.models.client.Client object at 0x7f48be04b1a0>"},{"name":"pet_id","value":"530"},{"name":"expected_status_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":5,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":5,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":11,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"story","value":"Обновление информации о питомцах"},{"name":"feature","value":"Pet"},{"name":"epic","value":"Petstore API"},{"name":"parentSuite","value":"tests.pet"},{"name":"suite","value":"test_pet"},{"name":"subSuite","value":"TestPet"},{"name":"host","value":"fv-az1065-663"},{"name":"thread","value":"2293-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.pet.test_pet"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"e2d4396fd87a159.json","parameterValues":[]}