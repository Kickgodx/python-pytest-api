{"uid":"4f737b6194b7f036","name":"Создание и удаление категории у питомца","fullName":"tests.pet.test_pet.TestPet#test_delete_pet_category","historyId":"aecf19fa28fdf42907d2d282dce2691e","time":{"start":1744327888997,"stop":1744327899055,"duration":10058},"status":"failed","statusMessage":"AssertionError: Значение id=2 name='Cat' не равно ожидаемому None","statusTrace":"self = <test_pet.TestPet object at 0x7f93d6abb3e0>\nclient = <src.models.client.Client object at 0x7f93d6bd2810>\npet_helper = <src.func.pet.helpers.PetHelper object at 0x7f93d67311f0>\npet_data = Pet(id=87, category=None, name='Michael Peterson', photo_urls=['https://picsum.photos/282/157'], tags=[Tag(id=515, name='DodgerBlue')], status='pending')\n\n    @allure.story(\"Обновление информации о питомцах\")\n    @allure.title(\"Создание и удаление категории у питомца\")\n    def test_delete_pet_category(self, client, pet_helper, pet_data):\n    \twith allure.step(\"Создание питомца\"):\n    \t\tresponse = pet_helper.create_pet(client, pet_data)\n    \t\tCustomAsserts.assert_equal(response.name, pet_data.name)\n    \n    \ttime.sleep(10)\n    \n    \twith allure.step(\"Обновление категории питомца\"):\n    \t\tnew_category = Category(id=2, name=\"Cat\")\n    \t\tpet_data.category = new_category\n    \t\tresponse = pet_helper.update_pet(client, pet_data)\n    \t\tCustomAsserts.assert_equal(response.category.id, new_category.id)\n    \n    \twith allure.step(\"Удаление категории у питомца\"):\n    \t\tpet_data.category = None\n    \t\tresponse = pet_helper.update_pet(client, pet_data)\n    \t\tCustomAsserts.assert_equal(response.category, None)\n    \n    \twith allure.step(\"Проверка удаления категории у питомца\"):\n    \t\tresponse = pet_helper.get_pet(client, pet_data.id)\n>   \t\tCustomAsserts.assert_equal(response.category, None)\n\ntests/pet/test_pet.py:216: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsrc/tech/custom_asserts.py:23: in assert_equal\n    _assert_equal(value, expected_value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nval = Category(id=2, name='Cat'), expected_val = None\n\n    @step(step_name)\n    def _assert_equal(val, expected_val):\n    \tif isinstance(val, str) or isinstance(expected_val, str):\n    \t\tval = str(val)\n    \t\texpected_val = str(expected_val)\n>   \tassert val == expected_val, f\"Значение {value} не равно ожидаемому {expected_value}\"\nE    AssertionError: Значение id=2 name='Cat' не равно ожидаемому None\n\nsrc/tech/custom_asserts.py:21: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1744327868640,"stop":1744327868642,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"client","time":{"start":1744327868642,"stop":1744327868642,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pet_helper","time":{"start":1744327868642,"stop":1744327868642,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pet_data","time":{"start":1744327888995,"stop":1744327888997,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Значение id=2 name='Cat' не равно ожидаемому None","statusTrace":"self = <test_pet.TestPet object at 0x7f93d6abb3e0>\nclient = <src.models.client.Client object at 0x7f93d6bd2810>\npet_helper = <src.func.pet.helpers.PetHelper object at 0x7f93d67311f0>\npet_data = Pet(id=87, category=None, name='Michael Peterson', photo_urls=['https://picsum.photos/282/157'], tags=[Tag(id=515, name='DodgerBlue')], status='pending')\n\n    @allure.story(\"Обновление информации о питомцах\")\n    @allure.title(\"Создание и удаление категории у питомца\")\n    def test_delete_pet_category(self, client, pet_helper, pet_data):\n    \twith allure.step(\"Создание питомца\"):\n    \t\tresponse = pet_helper.create_pet(client, pet_data)\n    \t\tCustomAsserts.assert_equal(response.name, pet_data.name)\n    \n    \ttime.sleep(10)\n    \n    \twith allure.step(\"Обновление категории питомца\"):\n    \t\tnew_category = Category(id=2, name=\"Cat\")\n    \t\tpet_data.category = new_category\n    \t\tresponse = pet_helper.update_pet(client, pet_data)\n    \t\tCustomAsserts.assert_equal(response.category.id, new_category.id)\n    \n    \twith allure.step(\"Удаление категории у питомца\"):\n    \t\tpet_data.category = None\n    \t\tresponse = pet_helper.update_pet(client, pet_data)\n    \t\tCustomAsserts.assert_equal(response.category, None)\n    \n    \twith allure.step(\"Проверка удаления категории у питомца\"):\n    \t\tresponse = pet_helper.get_pet(client, pet_data.id)\n>   \t\tCustomAsserts.assert_equal(response.category, None)\n\ntests/pet/test_pet.py:216: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsrc/tech/custom_asserts.py:23: in assert_equal\n    _assert_equal(value, expected_value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nval = Category(id=2, name='Cat'), expected_val = None\n\n    @step(step_name)\n    def _assert_equal(val, expected_val):\n    \tif isinstance(val, str) or isinstance(expected_val, str):\n    \t\tval = str(val)\n    \t\texpected_val = str(expected_val)\n>   \tassert val == expected_val, f\"Значение {value} не равно ожидаемому {expected_value}\"\nE    AssertionError: Значение id=2 name='Cat' не равно ожидаемому None\n\nsrc/tech/custom_asserts.py:21: AssertionError","steps":[{"name":"Создание питомца","time":{"start":1744327888997,"stop":1744327889015,"duration":18},"status":"passed","steps":[{"name":"Создание питомца","time":{"start":1744327888997,"stop":1744327889015,"duration":18},"status":"passed","steps":[{"name":"Статус код = 200","time":{"start":1744327889015,"stop":1744327889015,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"resp","value":"<Response [200]>"},{"name":"expected_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"ece184903c5c5035","name":"Request","source":"ece184903c5c5035.txt","type":"text/plain","size":39},{"uid":"f39586003db2820d","name":"Request headers","source":"f39586003db2820d.json","type":"application/json","size":196},{"uid":"f89e629453dd310d","name":"Request body","source":"f89e629453dd310d.json","type":"application/json","size":260},{"uid":"a1a9462474020f0","name":"Response status code","source":"a1a9462474020f0.txt","type":"text/plain","size":3},{"uid":"c5ede12512508123","name":"Response Headers","source":"c5ede12512508123.json","type":"application/json","size":357},{"uid":"a7abaa8f1765395f","name":"Response body","source":"a7abaa8f1765395f.json","type":"application/json","size":260}],"parameters":[{"name":"client","value":"<src.models.client.Client object at 0x7f93d6bd2810>"},{"name":"data","value":"Pet(id=87, category=Category(id=865, name='Dawn Monroe'), name='Michael Peterson', photo_urls=['https://picsum.photos/282/157'], tags=[Tag(id=515, name='DodgerBlue')], status='pending')"},{"name":"expected_status_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Проверка, что 'Michael Peterson' равно 'Michael Peterson'","time":{"start":1744327889015,"stop":1744327889015,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"val","value":"'Michael Peterson'"},{"name":"expected_val","value":"'Michael Peterson'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Обновление категории питомца","time":{"start":1744327899015,"stop":1744327899029,"duration":14},"status":"passed","steps":[{"name":"Обновление информации о питомце","time":{"start":1744327899016,"stop":1744327899029,"duration":13},"status":"passed","steps":[{"name":"Статус код = 200","time":{"start":1744327899029,"stop":1744327899029,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"resp","value":"<Response [200]>"},{"name":"expected_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"6995a63256753eaf","name":"Request","source":"6995a63256753eaf.txt","type":"text/plain","size":38},{"uid":"f36dae57277c7a96","name":"Request headers","source":"f36dae57277c7a96.json","type":"application/json","size":196},{"uid":"11fcb50b9494f535","name":"Request body","source":"11fcb50b9494f535.json","type":"application/json","size":250},{"uid":"fccec6bbadd06683","name":"Response status code","source":"fccec6bbadd06683.txt","type":"text/plain","size":3},{"uid":"44ac96f56e120c3a","name":"Response Headers","source":"44ac96f56e120c3a.json","type":"application/json","size":357},{"uid":"7ed27c424e717d88","name":"Response body","source":"7ed27c424e717d88.json","type":"application/json","size":250}],"parameters":[{"name":"client","value":"<src.models.client.Client object at 0x7f93d6bd2810>"},{"name":"data","value":"Pet(id=87, category=Category(id=2, name='Cat'), name='Michael Peterson', photo_urls=['https://picsum.photos/282/157'], tags=[Tag(id=515, name='DodgerBlue')], status='pending')"},{"name":"expected_status_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Проверка, что '2' равно '2'","time":{"start":1744327899029,"stop":1744327899029,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"val","value":"2"},{"name":"expected_val","value":"2"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Удаление категории у питомца","time":{"start":1744327899029,"stop":1744327899042,"duration":13},"status":"passed","steps":[{"name":"Обновление информации о питомце","time":{"start":1744327899030,"stop":1744327899041,"duration":11},"status":"passed","steps":[{"name":"Статус код = 200","time":{"start":1744327899041,"stop":1744327899041,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"resp","value":"<Response [200]>"},{"name":"expected_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"52b384de6483afa8","name":"Request","source":"52b384de6483afa8.txt","type":"text/plain","size":38},{"uid":"7feab56d0887e223","name":"Request headers","source":"7feab56d0887e223.json","type":"application/json","size":196},{"uid":"59d736a35b54227a","name":"Request body","source":"59d736a35b54227a.json","type":"application/json","size":198},{"uid":"6336e2416c675378","name":"Response status code","source":"6336e2416c675378.txt","type":"text/plain","size":3},{"uid":"ebb9d83d71ec175b","name":"Response Headers","source":"ebb9d83d71ec175b.json","type":"application/json","size":357},{"uid":"a38e7eae072ea464","name":"Response body","source":"a38e7eae072ea464.json","type":"application/json","size":198}],"parameters":[{"name":"client","value":"<src.models.client.Client object at 0x7f93d6bd2810>"},{"name":"data","value":"Pet(id=87, category=None, name='Michael Peterson', photo_urls=['https://picsum.photos/282/157'], tags=[Tag(id=515, name='DodgerBlue')], status='pending')"},{"name":"expected_status_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Проверка, что 'None' равно 'None'","time":{"start":1744327899041,"stop":1744327899041,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"val","value":"None"},{"name":"expected_val","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Проверка удаления категории у питомца","time":{"start":1744327899042,"stop":1744327899055,"duration":13},"status":"failed","statusMessage":"AssertionError: Значение id=2 name='Cat' не равно ожидаемому None\n","statusTrace":"  File \"/home/runner/work/python-pytest-api/python-pytest-api/tests/pet/test_pet.py\", line 216, in test_delete_pet_category\n    CustomAsserts.assert_equal(response.category, None)\n  File \"/home/runner/work/python-pytest-api/python-pytest-api/src/tech/custom_asserts.py\", line 23, in assert_equal\n    _assert_equal(value, expected_value)\n  File \"/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/python-pytest-api/python-pytest-api/src/tech/custom_asserts.py\", line 21, in _assert_equal\n    assert val == expected_val, f\"Значение {value} не равно ожидаемому {expected_value}\"\n           ^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Получение информации о питомце по ID","time":{"start":1744327899042,"stop":1744327899054,"duration":12},"status":"passed","steps":[{"name":"Статус код = 200","time":{"start":1744327899054,"stop":1744327899054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"resp","value":"<Response [200]>"},{"name":"expected_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"3acf840810caad54","name":"Request","source":"3acf840810caad54.txt","type":"text/plain","size":41},{"uid":"ba97ee055d3378c0","name":"Request headers","source":"ba97ee055d3378c0.json","type":"application/json","size":169},{"uid":"c3c1fa8a5ca21a72","name":"Response status code","source":"c3c1fa8a5ca21a72.txt","type":"text/plain","size":3},{"uid":"1dbdcd695cf1e212","name":"Response Headers","source":"1dbdcd695cf1e212.json","type":"application/json","size":357},{"uid":"457e3fc2c845e6ec","name":"Response body","source":"457e3fc2c845e6ec.json","type":"application/json","size":250}],"parameters":[{"name":"client","value":"<src.models.client.Client object at 0x7f93d6bd2810>"},{"name":"pet_id","value":"87"},{"name":"expected_status_code","value":"200"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":5,"hasContent":true,"attachmentStep":false},{"name":"Проверка, что 'id=2 name='Cat'' равно 'None'","time":{"start":1744327899054,"stop":1744327899054,"duration":0},"status":"failed","statusMessage":"AssertionError: Значение id=2 name='Cat' не равно ожидаемому None\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.9/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/python-pytest-api/python-pytest-api/src/tech/custom_asserts.py\", line 21, in _assert_equal\n    assert val == expected_val, f\"Значение {value} не равно ожидаемому {expected_value}\"\n           ^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[{"name":"val","value":"Category(id=2, name='Cat')"},{"name":"expected_val","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":5,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":16,"attachmentsCount":23,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"story","value":"Обновление информации о питомцах"},{"name":"epic","value":"Petstore API"},{"name":"feature","value":"Pet"},{"name":"parentSuite","value":"tests.pet"},{"name":"suite","value":"test_pet"},{"name":"subSuite","value":"TestPet"},{"name":"host","value":"fv-az1065-663"},{"name":"thread","value":"2302-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.pet.test_pet"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"4f737b6194b7f036.json","parameterValues":[]}